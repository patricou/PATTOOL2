<!-- Discussion Modal -->
<div class="modal-header">
    <h4 class="modal-title">{{ title }}</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="close()">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body p-0">
    <app-discussion 
        #discussionComponent
        [discussionId]="discussionId" 
        [title]="''"
        [showTitle]="false">
    </app-discussion>
</div>
<div class="modal-footer">
    <div class="footer-left">
        <!-- Connection Status -->
        <div *ngIf="discussionComponent && (isConnecting || connectionStatus)" 
             class="connection-status-bar" 
             [class.connecting]="isConnecting && !connectionStatus.startsWith('Reconnecting')"
             [class.reconnecting]="connectionStatus.startsWith('Reconnecting')"
             [class.connected]="connectionStatus === 'Connected'"
             [class.disconnected]="connectionStatus === 'Disconnected'"
             [class.error]="connectionStatus && (connectionStatus.includes('error') || connectionStatus.includes('timeout'))">
            <i class="fa" 
               [class.fa-spinner]="isConnecting || connectionStatus.startsWith('Reconnecting')"
               [class.fa-spin]="isConnecting || connectionStatus.startsWith('Reconnecting')"
               [class.fa-check-circle]="connectionStatus === 'Connected'"
               [class.fa-times-circle]="connectionStatus === 'Disconnected'"
               [class.fa-exclamation-circle]="connectionStatus && (connectionStatus.includes('error') || connectionStatus.includes('timeout'))"></i>
            <span>{{ connectionStatus }}</span>
        </div>
        <!-- Discussion ID -->
        <div class="discussion-id" *ngIf="discussionId">
            <span class="discussion-id-label">ID:</span>
            <span class="discussion-id-value">{{ discussionId }}</span>
        </div>
    </div>
    <div class="footer-right">
        <button type="button" 
                class="btn btn-outline-primary btn-sm" 
                (click)="refreshDiscussion()" 
                [disabled]="isLoading"
                title="RafraÃ®chir la discussion">
            <i class="fa" 
               [class.fa-refresh]="!isLoading"
               [class.fa-spinner]="isLoading"
               [class.fa-spin]="isLoading"></i>
        </button>
        <button type="button" class="btn btn-secondary btn-fermer" (click)="close()">Fermer</button>
    </div>
</div>

